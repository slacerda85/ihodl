// Lightning Network constants

export const LIGHTNING_CONSTANTS = {
  // BIP32 paths for Lightning
  BIP32_PURPOSE: 1017, // Purpose for Lightning Network
  BIP32_COIN_TYPE: 0, // Bitcoin mainnet
  BIP32_ACCOUNT: 0,

  // Invoice defaults
  DEFAULT_INVOICE_EXPIRY: 3600, // 1 hour in seconds
  MAX_INVOICE_EXPIRY: 604800, // 1 week in seconds
  DEFAULT_CLTV_EXPIRY: 144, // 1 day in blocks
  MIN_CLTV_EXPIRY: 18, // Minimum CLTV expiry delta

  // Channel defaults
  MIN_CHANNEL_CAPACITY: 20000, // 20k sats minimum
  DEFAULT_CHANNEL_FEE_RATE: 1000, // ppm
  DEFAULT_DUST_LIMIT: 546, // satoshis
  DEFAULT_CHANNEL_RESERVE: 1000, // satoshis
  DEFAULT_HTLC_MINIMUM: 1000, // msat
  DEFAULT_MAX_HTLC_VALUE_IN_FLIGHT: 100000000, // msat (100k sats)
  DEFAULT_MAX_ACCEPTED_HTLCS: 30,
  DEFAULT_TO_SELF_DELAY: 144, // blocks
  DEFAULT_MIN_DEPTH: 6, // confirmations

  // Network parameters
  MAINNET_GENESIS_HASH: '6fe28c0ab6f1b372c1a6a246ae63f74f931e8365e15a089c68d619000000000000',
  TESTNET_GENESIS_HASH: '43497fd7f826957108f4a30fd9cec3aeba79972084e90ead01ea33090000000000',
  REGTEST_GENESIS_HASH: '0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206',

  // BOLT 11 Tagged Fields
  TAG_PAYMENT_HASH: 'p',
  TAG_DESCRIPTION: 'd',
  TAG_PAYEE_PUB_KEY: 'n',
  TAG_DESCRIPTION_HASH: 'h',
  TAG_EXPIRY: 'x',
  TAG_CLTV_EXPIRY: 'c',
  TAG_FALLBACK_ADDRESS: 'f',
  TAG_ROUTING_INFO: 'r',
  TAG_FEATURES: '9',
  TAG_SIGNATURE: 's',

  // Lightning message types (subset)
  MSG_INIT: 16,
  MSG_ERROR: 17,
  MSG_PING: 18,
  MSG_PONG: 19,
  MSG_OPEN_CHANNEL: 32,
  MSG_ACCEPT_CHANNEL: 33,
  MSG_FUNDING_CREATED: 34,
  MSG_FUNDING_SIGNED: 35,
  MSG_CHANNEL_READY: 36,
  MSG_UPDATE_ADD_HTLC: 128,
  MSG_UPDATE_FULFILL_HTLC: 130,
  MSG_UPDATE_FAIL_HTLC: 131,
  MSG_COMMITMENT_SIGNED: 132,
  MSG_REVOKE_AND_ACK: 133,
  MSG_UPDATE_FEE: 134,
  MSG_CHANNEL_ANNOUNCEMENT: 256,
  MSG_NODE_ANNOUNCEMENT: 257,
  MSG_CHANNEL_UPDATE: 258,
  MSG_ANNOUNCEMENT_SIGNATURES: 259,
} as const

// Lightning Network features (BOLT 9)
export const LIGHTNING_FEATURES = {
  OPTION_DATA_LOSS_PROTECT: 0x01,
  OPTION_UPFRONT_SHUTDOWN_SCRIPT: 0x02,
  OPTION_GOSSIP_QUERIES: 0x04,
  OPTION_STATIC_REMOTE_KEY: 0x08,
  OPTION_WUMBO_CHANNELS: 0x10,
  OPTION_ANCHORS_ZERO_FEE_HTLC_TX: 0x20,
  OPTION_ANCHORS: 0x40,
  OPTION_TRAMPOLINE_ROUTING: 0x80,
} as const

// BOLT 11 Human-readable prefixes
export const BOLT11_PREFIXES = {
  MAINNET: 'lnbc',
  TESTNET: 'lntb',
  REGTEST: 'lnbcrt',
} as const

// Common Lightning error codes
export const LIGHTNING_ERRORS = {
  TEMPORARY_CHANNEL_FAILURE: 0x1007,
  AMOUNT_BELOW_MINIMUM: 0x1008,
  FEE_INSUFFICIENT: 0x1009,
  INCORRECT_CLTV_EXPIRY: 0x100a,
  EXPIRY_TOO_SOON: 0x100b,
  INCORRECT_OR_UNKNOWN_PAYMENT_DETAILS: 0x400f,
  PAYMENT_REQUIRED: 0x4010,
  UNKNOWN_PAYMENT_HASH: 0x4011,
  INCORRECT_PAYMENT_AMOUNT: 0x4012,
  FINAL_INCORRECT_CLTV_EXPIRY: 0x4013,
  FINAL_INCORRECT_HTLC_AMOUNT: 0x4014,
  CHANNEL_DISABLED: 0x4000,
  EXPIRY_TOO_FAR: 0x4015,
} as const
